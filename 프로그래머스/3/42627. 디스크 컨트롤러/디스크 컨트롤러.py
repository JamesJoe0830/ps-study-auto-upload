# https://school.programmers.co.kr/learn/courses/30/lessons/42627
# 42627. μ΄μ¤‘μ°μ„ μμ„ν [π¥ LEVEL3]
# π“ μ•κ³ λ¦¬μ¦ λ¶„λ¥: heapq(ν™) 
# π”¥ μ¤λ‹µ ν•„μ”(μ‹κ°„μ΄κ³Ό λ° λ…Όλ¦¬ μƒκ° λ¶€μ΅±)
# β° κ±Έλ¦° μ‹κ°„ : 2μ‹κ°„ (ν’€μ΄ λ΄„)
# μ‹κ°„ λ³µμ΅λ„ : O(nlogn)
# 
# [μ™ heapqλ΅ ν’€μ–΄μ•Όν•λ”κ°€?]
# 0. μ‹κ°„ ν¨μ¨μ„± : ν™μ„ μ‚¬μ©ν•λ©΄ μµμ†κ°’μ„ λΉ λ¥΄κ² μ°Ύμ„ μ μμΌλ―€λ΅ O(log n)μ‹κ°„ λ³µμ΅λ„κ°€ κ±Έλ¦°λ‹¤.
# 1. κ³µκ°„ ν¨μ¨μ„± : ν™μ€ λ©”λ¨λ¦¬ κ³µκ°„μ„ λ™μ  λ°°μ—΄μ— λΉ„ν•΄ λ©”λ¨λ¦¬ μ†λΉ„κ°€ μ λ‹¤.
# 2. μ •λ ¬λ μμ„ μ μ§€ : ν™μ€ μ •λ ¬λ μμ„λ¥Ό μ§€μ†μ μΌλ΅ μ μ§€ν•΄μ¤€λ‹¤.
# [μ£Όμμ‚¬ν•­]
# 0. ν„μ¬ μ‹μ μ— κ²°κµ­ μ‘μ—… μ‹κ°„μ΄ μ§§μ€ μμ„λ€λ΅ μ‹ν–‰λμ–΄μ•Ό ν•λ‹¤.
# 
# ---------------------------------------------------------------------------------

from heapq import heapify, heappop, heappush
def solution(jobs):
    answer, now = 0, 0
    length = len(jobs)
    start = -1 # μ΄μ „μ— μ™„λ£ν• μ‘μ—… μ‹κ°„
    heap = []
    cnt = 0 # μ²λ¦¬λ μ‘μ—…μ κ°μ
    
    while cnt < len(jobs) : 
        # print("now",now)
        # ν„μ¬ μ‹μ μ—μ„ μ²λ¦¬ν•  μ μλ” μ‘μ—…λ“¤μ„ μ €μ¥ν•λ‹¤.
        for j in jobs : 
            if start < j[0] <= now: # π”¥μ΄μ „μ— μ™„λ£ν• μ‘μ—… μ‹κ°„ ~ ν„μ¬ μ‹μ μ—μ„ μ²λ¦¬ν•  μ μλ” μ‘μ—…
                heappush(heap, [j[1],j[0]])
        # ν™μ— κ°’μ΄ μ΅΄μ¬ν• λ• λ½‘μ•„μ„ ν„μ¬ μ‹κ°„κ³Ό
        if heap : 
            current = heappop(heap)
            start =now
            now += current[0] # ν„μ¬ μ‹κ°„μ— μ‹¤ν–‰μ‹κ°„ λ”ν•΄μ£Όκ³ 
            answer += now - current[1] #μ΄ μ†μ”λ μ‹κ°„μ€ μ‹μ‘ μ‹κ°„μ„ ν„μ¬ μ‹κ°„μ—μ„ λΉΌμ¤€λ‹¤.
            cnt+=1 #μ‘μ—…μ΄ μ™„λ£λ κ²ƒμ κ°μλ¥Ό λ”ν•΄μ¤€λ‹¤
        else: # μ²λ¦¬ν•  μ‘μ—…μ΄ μ—†λ‹¤λ©΄ μ‹κ°„μ€ νλ¥Έλ‹¤.
            now +=1 
        
    return answer //length

# ---------------------------------------------------------------------------------